YUI.add("stencil-sticker",function(e,t){"use strict";function F(t){this.constructor.superclass.constructor.call(this,t);var n=this._node,r=P(n),s,o={},u,f={},l;s=e.Node.create('<div class="StickyPholder"></div>'),s.setStyle(h,n.getStyle(h)),o.marginTop=0,n.insert(s,"before"),l=s.getY(),E&&E.csstransforms3d&&(!e.UA.gecko||e.UA.gecko>=27)&&(o.transform=m),n.setStyles(o),u=n.get(c),f.pHolder=s,f.top=r,f.y=l,f.currentY=l,f.vpTaller=e.DOM.viewportRegion().height>u,f.nodeHeight=u,f.offset=0,f.lastPos=a,n._sticker=f,w.push(n),M(n,i)}if(e.UA.ios&&e.UA.ios<5||e.UA.android&&e.UA.android<3||e.UA.silk||e.UA.userAgent.match(/Silk/)||e.UA.ie&&e.UA.ie<7)return;var n="px",r=null,i=!0,s=!1,o="top",u="bottom",a="none",f="scroll",l="resize",c="offsetHeight",h="marginTop",p="Sticky",d="Sticky-on",v="Sticky-off",m="translate3d(0,0,0)",g=0,y=0,b=s,w=[],E=Modernizr,S=e.config.doc,x=e.config.win,T=e.one("html"),N=parseInt(e.one("body").getComputedStyle("minWidth"),10)||1150,C=50,k=0,L=r,A,O,M,_,D,P,H,B,j;O=function(){var e;b=s,k=+(new Date);for(e=w.length-1;e>=0;e-=1)M(w[e]);y=g},M=function(t,n){var i,s,f,l;if(y===g)return;L===r&&(L=e.DOM.viewportRegion()),i=L,D(t,i),l=Math.round(t._sticker.y+t._sticker.nodeHeight+t._sticker.offset),l<t._sticker.scrollHeight&&(s=t._sticker.lastPos,t._sticker.nodeHeight>i.height-t._sticker.top?(f=g>y,(f||n)&&i.bottom>=l?s=u:!f&&!n&&i.top+t._sticker.top<=t._sticker.currentY&&i.top+t._sticker.top>t._sticker.y?s=o:s=a):t._sticker.nodeHeight<i.height-t._sticker.top&&g+t._sticker.top>t._sticker.y?s=o:s=a,(t._sticker.lastPos!==s||t._sticker.y===i.top+t._sticker.top)&&_(t,s))},D=function(e,t){var n=e.getY();n<0&&e.hasClass(p)?n=t.top+n:e._sticker.lastPos===o&&(n=t.top+e._sticker.top),e._sticker.currentY=n,e._sticker.y=e._sticker.pHolder.getY(),e._sticker.nodeHeight=e.get(c),e._sticker.offset=Math.max(n-e._sticker.y,0),e._sticker.vpTaller=t.height>e._sticker.nodeHeight,e._sticker.scrollHeight=Math.max(S.body.scrollHeight,S.documentElement.scrollHeight)},_=function(t,r){var f={},l,c;r===o?(f={position:"",bottom:"",top:t._sticker.top+n,transform:m},t._sticker.translated=s):r===u?(f={position:"",bottom:0,top:"",transform:m},t._sticker.translated=s):(t._sticker.y!==L.top+t._sticker.top?(l="translate3d(0,"+t._sticker.offset+n+",0)",c=t._sticker.offset+n):(l="",c=""),E&&E.csstransforms3d&&(!e.UA.gecko||e.UA.gecko>=27)?f={position:"",bottom:"",top:"",transform:l}:f={position:"relative",bottom:"",top:c},t._sticker.translated=i),e.UA.gecko&&e.UA.gecko<27&&(f.transform=undefined),r!==a?(t.addClass(p),t._sticker.sticky=i):(t.removeClass(p),t._sticker.sticky=s),t._sticker.lastPos=r,t.setStyles(f),e.UA.safari&&(x.scrollTo(0,S.body.scrollTop+1),x.scrollTo(0,S.body.scrollTop-1))},P=function(t){var n=0,r=t.getData(),i;return r["sticker-top"]?n=parseInt(r["sticker-top"],10):r["sticker-toptarget"]?n=parseInt(e.one(r["sticker-toptarget"]).get(c),10):(i=e.one("body"),n=parseInt(i.getComputedStyle(h),10)||parseInt(i.getComputedStyle("paddingTop"),10)||0),n},H=function(t){t.type===f&&(g=e.DOM.docScrollY()),L=r,B(t.type)},B=function(e){var t,n;e===f?n=O:n=j,x.requestAnimationFrame?b||(requestAnimationFrame(n),b=i):(t=+(new Date),k&&t<k+C?(x.clearTimeout(A),A=x.setTimeout(n,C)):(k=t,n()))},j=function(){b=s,k=+(new Date),S.documentElement.clientWidth>N?T.replaceClass(v,d):T.replaceClass(d,v),O()},e.extend(F,e.Stencil.BasePlugin,{},{NS:"StencilSticker",requiresInit:i,defaultTriggerEvents:[]}),e.Stencil.registerPlugin(F,"Sticker"),x.addEventListener?(x.addEventListener(f,H,s),x.addEventListener(l,H,s)):(x.attachEvent("on"+f,H),x.attachEvent("on"+l,H)),j()},"@VERSION@",{requires:["node-base","node-style","node-screen"]});
;YUI.add("stencil-carousel",function(e,t){"use strict";function D(i){this.constructor.superclass.constructor.call(this,i);if(this._node&&this._node.get("tagName").toUpperCase()==="BODY")return;var s=this._node,o,u=s.all(b),a=s.one(y),d=s.one(w),m=s.one(S)||s.ancestor(S,!0)||s.ancestor(".Carousel",!0)||a&&a.ancestor(),x=s.ancestor("[dir]",!0),A=parseInt(s.getData("groupitems"),10)||1,O=d?A>1?A:s.one(".Carousel-Ranges-Item")?s.one(".Carousel-Item").all(".Carousel-Ranges-Item").size():n:n,M=a&&a.all(g),D=M&&M.size();if(!s||!a||!m)return;this.node=s,this.sliderEl=a,this.maskEl=m,this.rangesEl=d,this.itemsEl=a&&this.sliderEl.all(g),this.indicatorsEl=u.size()>0?u:n,this.prevEl=s.one(T),this.nextEl=s.one(N),this.playEl=s.one(C),this.stopEl=s.one(k),this.hasLoop=i.hasLoop||s.hasAttribute("data-loop"),this.noSwipe=i.noSwipe||s.hasAttribute("data-noswipe"),this.autoRotate=i.autoRotate||s.hasAttribute("data-auto-rotate"),this.noMultiClick=i.noMultiClick||s.hasAttribute("data-nomulticlick"),this.source=i.source||s.getData("carousel-source"),this.noHeight=this.node.hasAttribute("data-carousel-noheight"),this.noWidth=this.node.hasAttribute("data-carousel-nowidth"),this.pageLength=A?Math.ceil(D/A):D,this.groupItems=A,this.rangeLength=O,this.maskWidth=this.getMaskWidth(),this.displacedItems=[],this.dir=i.dir,this.isFirstLoad=r,this.hasDn=this.itemsEl.some(function(e){return e.hasClass("D-n")}),this.dir||(this.dir=x?x.getAttribute("dir"):"ltr",this.dir=this.dir==="rtl"?-1:1),this.currentPage=i.currentPage||parseInt(s.getAttribute("data-currentpage"),10),isNaN(this.currentPage)&&(this.currentPage=a?Math.floor(M.indexOf(a.one("."+v))/A):0),this.currentPage<0&&(this.currentPage=0),!this.noSwipe&&L&&L.touch&&(o=s.getDOMNode(),(new Stencil.Swiper(s,{swipe:{acceptable_opposite_axis_movement:100,min_swipe_distance:10}})).captureTouch(),o.addEventListener(p,e.bind(this.swipe,this),!1),o.addEventListener(c,e.bind(this.swipe,this),!1),o.addEventListener(h,e.bind(this.swipe,this),!1),o.addEventListener(f,e.bind(this.swipe,this),!1),o.addEventListener(l,e.bind(this.swipe,this),!1));if(!this.node||!this.sliderEl||!this.maskEl||!this.itemsEl.size())return;u&&this.updateIndicators(),d&&(this.itemsLength=O>1&&A!==O?this.node.all(E).size():this.node.all(g).size(),this.updateRanges()),this.autoRotate&&(this.rotationHandle="",this.rotationInterval=s.getData("auto-rotation-interval")||_,this.startRotation(),s.on("hover",e.bind(this.stopRotation,this),e.bind(this.startRotation,this))),this.updateToolbar(),this.updateVisibility(),this.prepareSource(),this.processSources(),this.breakpointGroupItems=this.itemsEl.size()&&this.itemsEl.item(0)&&this.itemsEl.item(0).get("className").match(/\sBp-\d-(\d)/),this.breakpointGroupItems=this.breakpointGroupItems&&this.breakpointGroupItems[1],s.once("mouseover",this.loadDelayedImages,this),this.resizeHandle=e.on(t+":resize",e.bind(this.jumpTo,this,n,"none",r),this),s.on("carousel:fill",this.fillItems,this),s.getData("groupitems")&&this.breakpointGroupItems&&(this.breakPointHandle=e.on("bquery:breakpoint",this.onBreakPoint,this),s.ancestor(".BreakPoint",r)&&this.onBreakPoint({node:s,type:"max-width"}))}var n=null,r=!0,i=!1,s=e.Lang,o="prev",u="next",a="jump-to",f="swipe",l="slide",c="init",h="end",p="dragstart",d=".Carousel-",v="Selected",m="Vh",g=d+"Item",y=d+"Slider",b=d+"Indicator",w=d+"Ranges",E=d+"Ranges-Item",S=d+"Mask",x="Disabled",T="button[data-jump-to=prev]",N="button[data-jump-to=next]",C="button[data-play]",k="button[data-stop]",L=Modernizr,A=e.one("body"),O="disabled",M,_=1e4;e.one(e.config.win).on("resize",function(){clearTimeout(M),M=setTimeout(function(){e.fire(t+":resize")},100)},this),e.extend(D,e.Stencil.BasePlugin,{isLooping:i,currentPage:0,pageLength:0,isDelayedLoaded:i,destroy:function(){this.node=n,this.sliderEl=n,this.maskEl=n,this.itemsEl=n,this.indicatorsEl=n,this.rangesEl=n,this.prevEl=n,this.nextEl=n,this.playEl=n,this.stopEl=n,this.resizeHandle&&(this.resizeHandle.detach(),this.resizeHandle=n),this.breakPointHandle&&(this.breakPointHandle.detach(),this.breakPointHandle=n),this.constructor.superclass.destroy.apply(this,arguments)},loadDelayedImages:function(){A.fire("imageloader:delayed",this.node),this.isDelayedLoaded=r},prepareSource:function(){var e=this.node,t=this.source,n;t&&(t==="simple"?n=e.getData("carousel-source-location")+"[{page}]":t==="url"&&(n=e.getData("carousel-source-href")),this.pageLength=parseInt(e.getData("carousel-source-length"),10),this.sourcePattern=n)},processSources:function(){var e=this.node,t=this.source,n=t?this.currentPage%3:this.currentPage,r,i,s,o;if(t==="event")return;t&&(this.itemsEl.item(n).setAttribute("data-source-plugin",this.source),this.sourcePattern&&(o=this.sourcePattern.replace("{page}",this.currentPage)),t==="simple"?this.itemsEl.item(n).setAttribute("data-location",o):t==="url"&&this.itemsEl.item(n).setAttribute("data-href",o)),e.hasAttribute("data-carousel-source-current")?s=this.itemsEl.item(n):(r=Math.max(n-1,0),i=n+2,s=this.itemsEl.slice(r,i),n+1===this.pageLength?s.push(this.itemsEl.item(0)):n===0&&s.push(this.itemsEl.item(this.itemsEl.size()-1))),this.constructor.superclass.processSources.call(this,s,{force:!0})},jumpTo:function(e,t,a){if(!this.node||!this.node._node)return;var f=this.currentPage,l=f,c=this.pageLength,h=this.hasLoop,p,d=this.itemsEl,v;e=typeof e=="number"||typeof e=="string"?e:f,t=t||"slide",e===o?f!==0?f-=1:h&&(f=c-1,this.isLooping=r):e===u?f+1!==c?f+=1:h&&(f=0,this.isLooping=r):f=parseInt(e,10),this.fromPage=l,this.currentPage=f,this.processSources(),this.updateVisibility(!0),this.noWidth||this.sliderEl.setStyle("width","100%"),t!=="none"&&(p={},this.source&&(v=f%3,e===o&&f!==0?p.previousEl=d.item(Math.max(v-1,0)):e===u&&f+1!==c?p.nextEl=d.item(Math.min(v+1,2)):s.isNumber(e)&&(p.previousEl=d.item(Math.max(v-1,0)),p.currentEl=d.item(v),p.nextEl=d.item(Math.min(v+1,2)))),p.currentPage=f,p.fromPage=l,this.node.publish("carousel:jump",{emitFacade:!0}),this.node.fire("carousel:jump",p),Stencil.utils
.dispatch(this.node.getDOMNode(),"carousel:jump",p));if(!this.isFirstLoad&&a||this.isFirstLoad&&!a)this.isFirstLoad=i,this.updateMaskHeight(l,n);t==="slide"?this.slide(l,f):t==="none"&&!this.isFirstLoad&&(this.updateMaskWidth(),this.translate(this.sliderEl,-this.maskWidth*e,0,i)),this.updateToolbar(),this.updateIndicators(),this.updateRanges()},slide:function(t,n){var s,o=this.sliderEl,u,a=this.pageLength,f=this.itemsEl,l=this.groupItems||1;n=this.source?n%3:n,this.noWidth||this.updateMaskWidth(),u=this.maskWidth,this.updateMaskHeight(n,r);if(this.isLooping||this.source&&t%3!==1&&(n===0||n===2)){if(n===0)s=f.slice(0,l),s.each(function(e){this.translate(e,u*a,0,i),this.displacedItems.push(e)},this),this.translate(o,-u*a,0,e.bind(function(){this.updateDisplacedItems(),this.updateVisibility()},this));else if(n===a-1||this.source&&n===2)s=f.slice(-l),s.each(e.bind(function(e){this.translate(e,-u*a,0,i),this.displacedItems.push(e)},this)),this.translate(o,u,0,e.bind(function(){this.updateDisplacedItems(),this.updateVisibility()},this));this.isLooping=i}else e.Array.each(f,function(e){this.displacedItems.push(e)},this),this.translate(o,-u*n,0,e.bind(function(){this.updateDisplacedItems(),this.updateVisibility()},this))},translate:function(t,n,r,s){var o={},u=this.dir;return n=n||n===0?u*n+"px":"",r=r||r===0?u*r+"px":"",L&&L.csstransforms3d?o.transform=n||r?"translate3d("+n+","+r+",0)":"":(o.left=n,o.top=r),this.transitioning&&(t.removeClass("FastTrans"),this.transitioning=!1),s===i||!n&&!r&&!s?(t.setStyles(o),"notransition"):(L&&L.csstransitions?(this.transitioning=!0,t.addClass("FastTrans"),Stencil.css.transitioned(t,e.bind(function(){t.removeClass("FastTrans"),this.transitioning=!1,s()},this)),t.setStyles(o)):e.use("transition",function(){o.duration=.4,t.transition(o,s)}),"transition")},handleEvent:function(e){var t=e.target.ancestor("[data-"+a+"]",r);if(t&&!t.get(O)&&t.getData(a)){if(this.noMultiClick&&this.transitioning){e.preventDefault();return}this.jumpTo(t.getData(a)),e.preventDefault();return}t=e.target.ancestor(C,r);if(t&&!t.get(O)){this.autoRotate=!0,this.startRotation(),e.preventDefault();return}t=e.target.ancestor(k,r);if(t&&!t.get(O)){this.autoRotate=!1,this.stopRotation(),e.preventDefault();return}},swipe:function(t){var n=0,r,s,a=this.sliderEl,f=this.pageLength,d=this.itemsEl,v=this.currentPage,m=this.groupItems;switch(t.type){case p:t.preventDefault();break;case c:this.loadDelayedImages(),this.updateVisibility(!0),this.updateMaskWidth(),s=this.maskWidth;if(this.hasLoop||this.source)v===0?(r=d.slice(-m),r.each(e.bind(function(e){this.translate(e,-s*f,0,i)},this))):this.currentPage===f-1&&(r=d.slice(0,m),r.each(function(e){this.translate(e,s*f,0,i)},this));break;case l:t.detail.axisIntention==="x"&&(n=t.detail.delta.x+v*this.maskWidth,this.translate(a,-n,0,i));break;case h:this.updateVisibility(),this.jumpTo(v),t.detail.stopPropagation(),t.detail.preventDefault();break;default:t.detail.direction==="left"&&this.jumpTo(u),t.detail.direction==="right"&&this.jumpTo(o)}},onBreakPoint:function(e){var t=this.node;t&&e.node.contains(t.getDOMNode())&&(e.type==="remove"?this.groupItems=t.getData("groupitems"):this.groupItems=this.breakpointGroupItems,this.pageLength=Math.ceil(this.itemsEl.size()/this.groupItems),this.currentPage=Math.ceil(this.currentPage/this.pageLength),this.rangeLength=this.groupItems,this.updateRanges())},fillItems:function(e,t){if(!e)return;t?this.sliderEl.append(e):(this.jumpTo(0,"slide"),this.sliderEl.setHTML(e)),this.itemsEl=this.sliderEl.all(g),this.pageLength=this.groupItems?Math.ceil(this.itemsEl.size()/this.groupItems):this.itemsEl.size(),this.updateToolbar(),this.updateVisibility()},updateVisibility:function(t){var n=this.itemsEl,r=this.currentPage>=n.size()?this.currentPage%3:this.currentPage*this.groupItems,i=r+this.groupItems;if(L&&L.touch)return;t?n.removeClass("V-h"):(n.addClass("V-h"),n.slice(r,i).removeClass("V-h")),e.UA.gecko&&(this.sliderEl.addClass("D-n"),this.sliderEl.get("offsetHeight"),this.sliderEl.removeClass("D-n"))},updateMaskHeight:function(t,n){var r,s={},o=this.maskEl;this.hasDn&&(this.itemsEl.removeClass("D-n"),this.hasDn=i,this.translate(this.sliderEl,-this.maskWidth*this.fromPage,0,i)),r=this.noHeight?0:this.itemsEl.item(this.source?t%3:t).get("offsetHeight"),r&&(s.height=r+"px",n?L&&L.csstransitions?(o.addClass("FastTrans"),Stencil.css.transitioned(o,e.bind(function(){o.removeClass("FastTrans")},this)),o.setStyle("height",s.height)):e.use("transition",function(){s.duration=.4,o.transition(s)}):o.setStyles(s))},updateMaskWidth:function(){this.maskWidth=this.getMaskWidth(),this.noWidth||this.sliderEl.setStyle("width",this.maskWidth+"px")},updateIndicators:function(){var e=this.indicatorsEl;e&&(e.removeClass(v),e.item(this.currentPage).addClass(v))},updateRanges:function(){var e=this.rangesEl,t=this.rangeLength,n=this.currentPage,r=this.itemsLength,i,s,o;e&&(t>1?(s=n*t+1,o=(n+1)*t,o=o>r?r:o,i=s+"-"+o):i=n+1,e.setContent(i+" of "+r))},updateToolbar:function(){var e=this.currentPage,t=this.prevEl,n=this.nextEl,r=this.playEl,i=this.stopEl;!this.hasLoop&&t&&n&&(e+1===this.pageLength?(n.setAttribute(O,O),n.addClass(x)):(n.removeAttribute(O,O),n.removeClass(x)),e===0?(t.setAttribute(O,O),t.addClass(x)):(t.removeAttribute(O,O),t.removeClass(x))),r&&r.toggleClass("Dn",this.autoRotate),i&&i.toggleClass("Dn",!this.autoRotate)},startRotation:function(){if(this.rotationHandle||!this.autoRotate)return;this.rotationHandle=setInterval(e.bind(this.rotate,this),this.rotationInterval),this.updateToolbar()},stopRotation:function(){if(typeof this.rotationHandle=="undefined")return;clearInterval(this.rotationHandle),this.rotationHandle="",this.updateToolbar()},rotate:function(){this.jumpTo("next")},updateDisplacedItems:function(){e.Array.each(this.displacedItems,e.bind(function(e){this.translate(e)},this)),this.translate(this.sliderEl,-this.maskWidth*this.currentPage,0,i),this.displacedItems=[]},getMaskWidth:function(){var e,t=0;if(this.itemsEl&&this.itemsEl.size
()>=this.groupItems)for(e=0;e<this.groupItems;e+=1)t+=parseInt(this.itemsEl.item(e).get("offsetWidth"),10);return t}},{NS:"StencilCarousel",CSS_SELECTED:v,CSS_HIDDEN:m,CSS_ITEM:g,CSS_SLIDER:y,CSS_INDICATORS:b,CSS_RANGES:w,CSS_RANGES_ITEM:E,CSS_MASK:S,CSS_DISABLED:x,PREV_SELECTOR:T,NEXT_SELECTOR:N,PLAY_SELECTOR:C,STOP_SELECTOR:k,requiresInit:!0}),e.Stencil.registerPlugin(D,"Carousel")},"@VERSION@",{requires:["stencil-base","yui-base","dom-base","node-base","node-style","node-pluginhost","event-hover"]});
;